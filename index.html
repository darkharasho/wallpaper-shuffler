<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self' http://localhost:8844 ws://localhost:8844; img-src 'self' img: file: data: http://localhost:8844; style-src 'self' 'unsafe-inline' http://localhost:8844; script-src 'self' 'unsafe-inline' http://localhost:8844;">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wallpaper Shuffler</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header class="titlebar">
    <div class="titlebar-drag">
      <div class="titlebar-brand">
        <span class="titlebar-mark" aria-hidden="true"></span>
        <span class="titlebar-title">Wallpaper Shuffler</span>
      </div>
      <div class="titlebar-meta">
        <span id="titlebar-version" class="titlebar-version">v...</span>
        <button id="update-pill" class="window-pill" type="button" aria-live="polite" title="Check for updates">
          Updates unavailable
        </button>
      </div>
    </div>
    <div class="titlebar-actions">
      <button id="window-minimize" class="window-button" type="button" aria-label="Minimize window">
        <span class="window-icon window-icon-minimize" aria-hidden="true"></span>
      </button>
      <button id="window-maximize" class="window-button" type="button" aria-label="Maximize window">
        <span class="window-icon window-icon-maximize" aria-hidden="true"></span>
      </button>
      <button id="window-close" class="window-button window-button-close" type="button" aria-label="Close window">
        <span class="window-icon window-icon-close" aria-hidden="true"></span>
      </button>
    </div>
  </header>
  <div class="app-shell">
    <header class="hero">
      <div class="hero-brand">
        <div class="hero-copy">
          <p class="eyebrow">Desktop Wallpaper Control Center</p>
          <h1>Wallpaper Shuffler</h1>
        </div>
      </div>
      <div class="hero-actions-shell">
        <div class="hero-actions">
          <button id="browse-btn" class="button button-secondary" type="button">Choose Folder</button>
          <button id="refresh-btn" class="button button-ghost" type="button">Refresh Library</button>
          <button id="shuffle-btn" class="button button-primary" type="button">Shuffle Now</button>
        </div>
      </div>
    </header>

    <section id="status" class="status hidden" aria-live="polite"></section>

    <main class="layout">
      <aside class="control-panel">
        <section class="panel surface current-surface">
          <div class="panel-heading">
            <p class="panel-kicker">Current</p>
            <h2>Active wallpaper</h2>
          </div>
          <div id="current-preview" class="current-preview empty">
            <div class="current-preview-overlay">
              <span id="current-name">Nothing applied yet</span>
              <small id="current-meta">Pick a folder and apply a wallpaper to get started.</small>
            </div>
          </div>
          <div class="nav-actions">
            <button id="prev-btn" class="button button-ghost" type="button">Previous</button>
            <button id="next-btn" class="button button-ghost" type="button">Next</button>
          </div>
        </section>

        <section class="panel surface">
          <div class="panel-heading">
            <p class="panel-kicker">Automation</p>
            <h2>Rotation rules</h2>
          </div>

          <label class="toggle-row" for="auto-rotate">
            <span>
              <strong>Auto-rotate</strong>
              <small>Run rotation on the interval configured below.</small>
            </span>
            <input id="auto-rotate" type="checkbox">
          </label>

          <div class="field">
            <div class="field-label-row">
              <label for="frequency-range">Frequency</label>
              <span id="frequency-value">30 minutes</span>
            </div>
            <input id="frequency-range" type="range" min="1" max="1440" step="1">
            <input id="frequency-input" class="number-input" type="number" min="1" max="1440" step="1">
          </div>

          <div class="field-grid">
            <label class="field">
              <span>Rotation mode</span>
              <select id="rotation-mode">
                <option value="shuffle">Smart shuffle</option>
                <option value="sequential">Sequential</option>
              </select>
            </label>

            <label class="field">
              <span>Library sorting</span>
              <select id="sort-mode">
                <option value="name-asc">Name A to Z</option>
                <option value="name-desc">Name Z to A</option>
                <option value="newest">Newest first</option>
                <option value="oldest">Oldest first</option>
              </select>
            </label>
          </div>

          <label class="toggle-row" for="avoid-repeats">
            <span>
              <strong>Avoid immediate repeats</strong>
              <small>Keep shuffle from landing on the same wallpaper twice in a row.</small>
            </span>
            <input id="avoid-repeats" type="checkbox">
          </label>
        </section>

        <section class="panel surface">
          <div class="panel-heading">
            <p class="panel-kicker">Library</p>
            <h2>Source folder</h2>
          </div>
          <div id="folder-path" class="folder-path">No folder selected</div>
          <div class="stats-grid" id="stats-grid"></div>
          <div id="dependency-note" class="dependency-note"></div>
        </section>
      </aside>

      <section class="content-panel">
        <section class="toolbar surface">
          <div class="toolbar-copy">
            <p class="panel-kicker">Gallery</p>
            <h2>Wallpaper library</h2>
          </div>
          <label class="search-shell">
            <span>Filter</span>
            <input id="search-input" type="search" placeholder="Search by filename">
          </label>
        </section>

        <section id="grid" class="wallpaper-grid" aria-live="polite"></section>
      </section>
    </main>
  </div>

  <script type="module" src="./renderer.js"></script>
</body>

</html>
